import { MicroRegionData } from '@/types/dashboard';

export const mockData: MicroRegionData[] = [
  {
    macrorregiao: "Nordeste",
    microrregiao: "Águas Formosas",
    regional_saude: "SRS Teófilo Otoni",
    analista: "Gabrielle Guimaraes Gonçalves",
    indice_geral: "0,42",
    eixo_1: "0,47",
    eixo_2: "0,29",
    eixo_3: "0,57",
    eixo_4: "0,15",
    eixo_5: "0,25",
    eixo_6: "0,36",
    eixo_7: "0,13",
    idh_completo: "0,611 - Médio",
    idh_valor: "0,611",
    idh_classificacao: "Médio",
    populacao: "55.667",
    classificacao_inmsd: "Em Evolução",
    email_analista: "gabrielle.goncalves@saude.mg.gov.br",
    ponto_focal: "Renata Luz Pereira Gouvea / Jokasta Quaresma Sena Ruas",
    email_ponto_focal: "renata.gouvea@saude.mg.gov.br / jokasta.ruas@saude.mg.gov.br",
    municipios: "Aguas Formosas, Bertopolis, Crisolita, Fronteira dos Vales, Machacalis, Pavao, Santa Helena de Minas, Umburatiba",
    macro_micro: "Micro - Águas Formosas",
    status_inmsd: "",
    pontuacao_geral: "",
    situacao_eixo_1: "A microrregião conta com grupos de trabalho informais e encontros esporádicos, sem regimento ou agenda fixa. Não há definição clara de papéis nem fluxo consolidado de informação, o que gera decisões desconectadas e retrabalho. As políticas de privacidade são fragmentadas entre municípios e não existe orçamento dedicado a iniciativas digitais.",
    recomendacao_eixo_1: "1. Formalizar governança intermunicipal com regimento específico e reuniões mensais. 2. Designar coordenador regional e definir fluxos de comunicação. 3. Criar orçamento conjunto para projetos digitais. 4. Estabelecer comitê de privacidade regional.",
    ferramenta_eixo_1: "Plataforma de gestão de projetos (ex: Monday.com), sistema de videoconferência e documentação colaborativa",
    situacao_eixo_2: "Infraestrutura básica presente mas com limitações de banda e cobertura irregular entre municípios. Alguns possuem fibra ótica, outros dependem de conexões mais lentas.",
    recomendacao_eixo_2: "1. Mapear e padronizar infraestrutura de conectividade. 2. Negociar contratos regionais para reduzir custos. 3. Implementar redundância nas conexões críticas.",
    ferramenta_eixo_2: "Ferramentas de monitoramento de rede e acordos com provedores regionais",
    situacao_eixo_3: "Sistemas fragmentados com pouca integração entre municípios. Dados em formatos diferentes, dificultando análises regionais.",
    recomendacao_eixo_3: "1. Padronizar sistemas principais. 2. Implementar data lake regional. 3. Criar dashboard unificado de indicadores.",
    ferramenta_eixo_3: "Plataforma de integração de dados e business intelligence",
    situacao_eixo_4: "Capacitação esporádica e sem continuidade. Profissionais com conhecimento básico em tecnologia, mas carentes em gestão digital.",
    recomendacao_eixo_4: "1. Programa regional de capacitação continuada. 2. Certificações em gestão digital. 3. Mentoria entre municípios.",
    ferramenta_eixo_4: "Plataforma de e-learning e programa de mentoria estruturado",
    situacao_eixo_5: "Serviços básicos digitalizados, mas com baixa integração e experiência do usuário fragmentada.",
    recomendacao_eixo_5: "1. Portal único regional. 2. Aplicativo mobile integrado. 3. Atendimento omnichannel.",
    ferramenta_eixo_5: "Plataforma de governo digital e sistema de CRM cidadão",
    situacao_eixo_6: "Pouca interoperabilidade entre sistemas municipais e estaduais. Necessidade de melhor integração.",
    recomendacao_eixo_6: "1. Implementar padrões de interoperabilidade. 2. APIs padronizadas. 3. Acordo de cooperação técnica.",
    ferramenta_eixo_6: "Gateway de APIs e ferramentas de integração",
    situacao_eixo_7: "Políticas de segurança básicas, mas sem padronização regional. Vulnerabilidades em alguns municípios.",
    recomendacao_eixo_7: "1. Política regional de segurança. 2. Centro de operações de segurança conjunto. 3. Backup e contingência regionais.",
    ferramenta_eixo_7: "SIEM regional e soluções de backup na nuvem"
  },
  {
    macrorregiao: "Nordeste",
    microrregiao: "Almenara",
    regional_saude: "SRS Teófilo Otoni", 
    analista: "Gabrielle Guimaraes Gonçalves",
    indice_geral: "0,58",
    eixo_1: "0,62",
    eixo_2: "0,45",
    eixo_3: "0,71",
    eixo_4: "0,39",
    eixo_5: "0,52",
    eixo_6: "0,48",
    eixo_7: "0,36",
    idh_completo: "0,672 - Médio",
    idh_valor: "0,672",
    idh_classificacao: "Médio",
    populacao: "78.456",
    classificacao_inmsd: "Consolidado",
    email_analista: "gabrielle.goncalves@saude.mg.gov.br",
    ponto_focal: "Carlos Silva Mendes",
    email_ponto_focal: "carlos.mendes@saude.mg.gov.br",
    municipios: "Almenara, Bandeira, Divisa Alegre, Felisburgo, Jacinto, Jordania, Rio do Prado, Rubim, Salto da Divisa, Santa Maria do Salto",
    macro_micro: "Micro - Almenara",
    status_inmsd: "Ativo",
    pontuacao_geral: "85",
    situacao_eixo_1: "Governança estruturada com comitê regional ativo e reuniões regulares. Boa coordenação entre municípios e definição clara de responsabilidades.",
    recomendacao_eixo_1: "Manter estrutura atual e focar em melhorias contínuas de processos.",
    ferramenta_eixo_1: "Sistema de gestão já implementado com bons resultados",
    situacao_eixo_2: "Boa infraestrutura com fibra ótica na maioria dos municípios.",
    recomendacao_eixo_2: "Expandir cobertura para áreas rurais restantes.",
    ferramenta_eixo_2: "Parcerias com provedores regionais consolidadas",
    situacao_eixo_3: "Sistemas bem integrados com dashboard regional funcionando.",
    recomendacao_eixo_3: "Expandir analytics e inteligência artificial.",
    ferramenta_eixo_3: "Plataforma BI já em operação",
    situacao_eixo_4: "Programa de capacitação ativo com bons resultados.",
    recomendacao_eixo_4: "Expandir para temas avançados como IA e análise de dados.",
    ferramenta_eixo_4: "Centro de treinamento regional estabelecido",
    situacao_eixo_5: "Portal regional implementado com boa aceitação dos cidadãos.",
    recomendacao_eixo_5: "Adicionar mais serviços e melhorar experiência mobile.",
    ferramenta_eixo_5: "Portal gov.br regional customizado",
    situacao_eixo_6: "Boa interoperabilidade com sistemas estaduais e federais.",
    recomendacao_eixo_6: "Implementar novos padrões emergentes.",
    ferramenta_eixo_6: "APIs já estabelecidas e funcionando",
    situacao_eixo_7: "Políticas de segurança bem estabelecidas.",
    recomendacao_eixo_7: "Manter atualizações e monitoramento contínuo.",
    ferramenta_eixo_7: "SOC regional operacional"
  },
  {
    macrorregiao: "Norte",
    microrregiao: "Diamantina",
    regional_saude: "SRS Diamantina",
    analista: "Pedro Santos Costa",
    indice_geral: "0,35",
    eixo_1: "0,41",
    eixo_2: "0,22",
    eixo_3: "0,38",
    eixo_4: "0,28",
    eixo_5: "0,31",
    eixo_6: "0,42",
    eixo_7: "0,18",
    idh_completo: "0,598 - Médio", 
    idh_valor: "0,598",
    idh_classificacao: "Médio",
    populacao: "42.113",
    classificacao_inmsd: "Inicial",
    email_analista: "pedro.costa@saude.mg.gov.br",
    ponto_focal: "Ana Paula Lima",
    email_ponto_focal: "ana.lima@saude.mg.gov.br",
    municipios: "Diamantina, Gouveia, Presidente Kubitschek, São Gonçalo do Rio Preto",
    macro_micro: "Micro - Diamantina",
    status_inmsd: "Em Planejamento",
    pontuacao_geral: "45",
    situacao_eixo_1: "Estrutura de governança incipiente, necessitando formalização e organização.",
    recomendacao_eixo_1: "Estabelecer comitê gestor regional e definir regimento interno.",
    ferramenta_eixo_1: "Estruturação de governança básica",
    situacao_eixo_2: "Infraestrutura limitada, principalmente em áreas rurais.",
    recomendacao_eixo_2: "Investir em conectividade básica e redundância.",
    ferramenta_eixo_2: "Projeto de conectividade rural",
    situacao_eixo_3: "Sistemas básicos sem integração significativa.",
    recomendacao_eixo_3: "Implementar sistemas integrados básicos.",
    ferramenta_eixo_3: "Plataforma de integração simples",
    situacao_eixo_4: "Capacitação esporádica e básica.",
    recomendacao_eixo_4: "Programa estruturado de capacitação digital.",
    ferramenta_eixo_4: "Curso básico de alfabetização digital",
    situacao_eixo_5: "Poucos serviços digitais disponíveis.",
    recomendacao_eixo_5: "Digitalizar serviços prioritários.",
    ferramenta_eixo_5: "Portal básico de serviços",
    situacao_eixo_6: "Baixa interoperabilidade.",
    recomendacao_eixo_6: "Implementar padrões básicos de integração.",
    ferramenta_eixo_6: "APIs básicas",
    situacao_eixo_7: "Segurança básica, necessitando melhorias.",
    recomendacao_eixo_7: "Implementar políticas básicas de segurança.",
    ferramenta_eixo_7: "Antivírus e firewall básicos"
  }
];

export function calculateMedians(data: MicroRegionData[]): Record<string, number> {
  const eixos = ['eixo_1', 'eixo_2', 'eixo_3', 'eixo_4', 'eixo_5', 'eixo_6', 'eixo_7'];
  const medians: Record<string, number> = {};
  
  eixos.forEach(eixo => {
    const values = data.map(item => {
      const value = item[eixo as keyof MicroRegionData];
      // Verificar se o valor existe e é válido
      if (value === undefined || value === null || value === '') {
        return NaN;
      }
      // Se for string, fazer replace, senão usar diretamente
      const cleanValue = typeof value === 'string' ? value.replace(',', '.') : String(value);
      return parseFloat(cleanValue);
    })
      .filter(val => !isNaN(val))
      .sort((a, b) => a - b);
    
    const mid = Math.floor(values.length / 2);
    medians[eixo] = values.length % 2 !== 0 ? 
      values[mid] : 
      (values[mid - 1] + values[mid]) / 2;
  });
  
  return medians;
}